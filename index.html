<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>AES Pro åŠ å¯†å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --font-main: 'æ¥·ä½“', 'KaiTi', 'STKaiti', 'åæ–‡æ¥·ä½“', serif;
            --font-mono: 'Courier New', 'Consolas', monospace;
            --bg-primary: #f8f9fa;
            --bg-secondary: #ffffff;
            --bg-tertiary: #f1f3f4;
            --text-primary: #202124;
            --text-secondary: #5f6368;
            --text-tertiary: #80868b;
            --border-color: #dadce0;
            --accent-blue: #1a73e8;
            --accent-blue-light: #e8f0fe;
            --accent-green: #34a853;
            --accent-green-light: #e6f4ea;
            --accent-red: #ea4335;
            --accent-red-light: #fce8e6;
            --accent-orange: #fbbc04;
            --accent-orange-light: #fef7e0;
            --accent-purple: #a142f4;
            --accent-purple-light: #f3e8fd;
            --shadow-1: 0 1px 2px 0 rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15);
            --shadow-2: 0 1px 3px 0 rgba(60,64,67,0.3), 0 4px 8px 3px rgba(60,64,67,0.15);
            --shadow-3: 0 4px 8px 0 rgba(60,64,67,0.3), 0 8px 16px 4px rgba(60,64,67,0.15);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
        }

        html { font-size: 16px; }
        @media (max-width: 380px) { html { font-size: 14px; } }
        @media (min-width: 768px) { html { font-size: 17px; } }

        body {
            font-family: var(--font-main);
            background: var(--bg-primary);
            min-height: 100vh;
            min-height: -webkit-fill-available;
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .page-bg {
            position: fixed;
            inset: 0;
            z-index: 0;
            background: linear-gradient(180deg, #f8f9fa 0%, #e8eaed 100%);
        }

        .page {
            position: relative;
            z-index: 1;
            width: 100%;
            max-width: 540px;
            margin: 0 auto;
            min-height: 100vh;
            padding: 1rem;
            padding-bottom: calc(2rem + env(safe-area-inset-bottom, 0));
            display: none;
        }

        .page.active {
            display: block;
            animation: pageSlideIn 0.4s cubic-bezier(0.2, 0, 0, 1);
        }

        @keyframes pageSlideIn {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* å¤´éƒ¨ */
        .header {
            text-align: center;
            padding: 1.25rem 0 1.5rem;
        }

        .header-logo {
            display: inline-flex;
            align-items: center;
            gap: 0.625rem;
            margin-bottom: 0.375rem;
        }

        .logo-icon {
            width: 2.75rem;
            height: 2.75rem;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            border-radius: 0.875rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-2);
            animation: logoFloat 3s ease-in-out infinite;
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-4px); }
        }

        .logo-icon svg { width: 1.5rem; height: 1.5rem; color: #fff; }

        .logo-text {
            font-size: 1.75rem;
            font-weight: 700;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-sub {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            margin-bottom: 0.625rem;
        }

        .header-tags {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .header-tag {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            padding: 0.3rem 0.625rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 1.25rem;
            font-size: 0.6875rem;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .header-tag:hover { border-color: var(--accent-blue); color: var(--accent-blue); }
        .header-tag::before { content: ''; width: 5px; height: 5px; border-radius: 50%; background: currentColor; animation: tagPulse 2s ease-in-out infinite; }

        @keyframes tagPulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(0.8); }
        }

        /* Toast */
        .toast-wrap {
            position: fixed;
            top: 1.25rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 9999;
            pointer-events: none;
            width: calc(100% - 2rem);
            max-width: 360px;
        }

        .toast {
            padding: 1rem 1.25rem;
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-3);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.9375rem;
            font-weight: 500;
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
            transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            pointer-events: auto;
            border-left: 4px solid;
        }

        .toast.show { opacity: 1; transform: translateY(0) scale(1); }
        .toast.success { border-color: var(--accent-green); background: linear-gradient(90deg, var(--accent-green-light), var(--bg-secondary)); }
        .toast.error { border-color: var(--accent-red); background: linear-gradient(90deg, var(--accent-red-light), var(--bg-secondary)); }
        .toast.info { border-color: var(--accent-blue); background: linear-gradient(90deg, var(--accent-blue-light), var(--bg-secondary)); }
        .toast svg { width: 1.375rem; height: 1.375rem; flex-shrink: 0; }
        .toast.success svg { color: var(--accent-green); }
        .toast.error svg { color: var(--accent-red); }
        .toast.info svg { color: var(--accent-blue); }

        /* ç¡®è®¤å¼¹çª— */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 10000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            animation: fadeIn 0.2s ease;
        }

        .modal-overlay.show { display: flex; }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-box {
            background: var(--bg-secondary);
            border-radius: var(--radius-xl);
            padding: 1.5rem;
            max-width: 320px;
            width: 100%;
            box-shadow: var(--shadow-3);
            animation: modalSlide 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes modalSlide {
            from { opacity: 0; transform: scale(0.9) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .modal-icon {
            width: 3.5rem;
            height: 3.5rem;
            margin: 0 auto 1rem;
            background: var(--accent-red-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-icon svg {
            width: 2rem;
            height: 2rem;
            color: var(--accent-red);
        }

        .modal-title {
            text-align: center;
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .modal-text {
            text-align: center;
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        .modal-btns {
            display: flex;
            gap: 0.75rem;
        }

        .modal-btn {
            flex: 1;
            padding: 0.875rem;
            border: none;
            border-radius: var(--radius-md);
            font-family: var(--font-main);
            font-size: 0.9375rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .modal-btn:active { transform: scale(0.97); }

        .modal-btn.cancel {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
        }

        .modal-btn.cancel:hover {
            background: var(--border-color);
        }

        .modal-btn.confirm {
            background: var(--accent-red);
            color: #fff;
        }

        .modal-btn.confirm:hover {
            background: #d33426;
        }

        /* å¡ç‰‡ */
        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-xl);
            overflow: hidden;
            box-shadow: var(--shadow-1);
            transition: box-shadow 0.3s;
        }

        .card:hover { box-shadow: var(--shadow-2); }

        .card-head {
            display: flex;
            align-items: center;
            gap: 0.625rem;
            padding: 1rem 1.25rem;
            background: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
            border-bottom: 1px solid var(--border-color);
        }

        .card-icon {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            transition: transform 0.3s;
        }

        .card:hover .card-icon { transform: scale(1.1) rotate(5deg); }
        .card-icon.encrypt { background: linear-gradient(135deg, var(--accent-blue-light), var(--accent-purple-light)); }
        .card-icon.decrypt { background: linear-gradient(135deg, var(--accent-orange-light), var(--accent-red-light)); }

        .card-title { font-size: 1.125rem; font-weight: 600; }

        .card-badge {
            margin-left: auto;
            padding: 0.25rem 0.625rem;
            border-radius: var(--radius-sm);
            font-size: 0.6875rem;
            font-weight: 600;
            letter-spacing: 0.02em;
        }

        .card-badge.blue { background: var(--accent-blue-light); color: var(--accent-blue); }
        .card-badge.orange { background: var(--accent-orange-light); color: #b06000; }

        /* æ¨¡å¼é€‰æ‹© */
        .mode-tabs {
            display: flex;
            padding: 0.625rem;
            gap: 0.375rem;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
        }

        .mode-tab {
            flex: 1;
            padding: 0.75rem 0.5rem;
            border: none;
            border-radius: var(--radius-md);
            background: transparent;
            color: var(--text-tertiary);
            font-family: var(--font-main);
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.25s cubic-bezier(0.2, 0, 0, 1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
        }

        .mode-tab:active { transform: scale(0.95); }
        .mode-tab.active { background: var(--bg-secondary); color: var(--text-primary); box-shadow: var(--shadow-1); }
        .mode-tab .icon { font-size: 1.375rem; transition: transform 0.3s; }
        .mode-tab.active .icon { transform: scale(1.15); }

        /* è¡¨å• */
        .form-body { padding: 1.25rem; }

        .form-group { margin-bottom: 1rem; }
        .form-group:last-child { margin-bottom: 0; }

        .form-label {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .form-label .meta { font-size: 0.75rem; color: var(--text-tertiary); font-weight: 400; }

        .form-label .tag {
            padding: 0.15rem 0.5rem;
            border-radius: var(--radius-sm);
            font-size: 0.6875rem;
            font-weight: 600;
        }

        .tag.blue { background: var(--accent-blue-light); color: var(--accent-blue); }
        .tag.purple { background: var(--accent-purple-light); color: var(--accent-purple); }
        .tag.orange { background: var(--accent-orange-light); color: #b06000; }
        .tag.red { background: var(--accent-red-light); color: var(--accent-red); }
        .tag.green { background: var(--accent-green-light); color: var(--accent-green); }

        .input-box { position: relative; }

        .input-box textarea,
        .input-box input {
            width: 100%;
            padding: 0.875rem 1rem;
            padding-right: 3rem;
            background: var(--bg-tertiary);
            border: 2px solid transparent;
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-family: var(--font-main);
            font-size: 1rem;
            line-height: 1.5;
            transition: all 0.25s;
            resize: none;
        }

        .input-box textarea { min-height: 5rem; }
        .input-box textarea::placeholder, .input-box input::placeholder { color: var(--text-tertiary); }

        .input-box textarea:focus,
        .input-box input:focus {
            outline: none;
            border-color: var(--accent-blue);
            background: var(--bg-secondary);
            box-shadow: 0 0 0 4px var(--accent-blue-light);
        }

        .input-btns {
            position: absolute;
            right: 0.5rem;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 0.25rem;
        }

        .input-btn {
            width: 2rem;
            height: 2rem;
            border: none;
            border-radius: var(--radius-sm);
            background: transparent;
            color: var(--text-tertiary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .input-btn:hover { background: var(--bg-secondary); color: var(--accent-blue); }
        .input-btn:active { transform: scale(0.85); }
        .input-btn svg { width: 1.125rem; height: 1.125rem; }

        /* å¯†ç å¼ºåº¦ */
        .pwd-meter {
            margin-top: 0.5rem;
            padding: 0.625rem 0.75rem;
            background: var(--bg-tertiary);
            border-radius: var(--radius-sm);
        }

        .meter-bar { display: flex; gap: 0.25rem; margin-bottom: 0.375rem; }

        .meter-seg {
            flex: 1;
            height: 4px;
            background: rgba(0, 0, 0, 0.08);
            border-radius: 2px;
            transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
        }

        .meter-seg.on { background: var(--seg-color); box-shadow: 0 0 8px var(--seg-color); }

        .meter-info { display: flex; justify-content: space-between; font-size: 0.75rem; }
        .meter-level { font-weight: 600; }
        .meter-level.weak { color: var(--accent-red); }
        .meter-level.medium { color: var(--accent-orange); }
        .meter-level.strong { color: var(--accent-green); }
        .meter-hint { color: var(--text-tertiary); }

        /* æç¤ºæ¡† */
        .tip-box {
            padding: 0.75rem 1rem;
            background: linear-gradient(135deg, var(--accent-blue-light), var(--accent-purple-light));
            border: 1px solid rgba(26, 115, 232, 0.2);
            border-radius: var(--radius-md);
            margin-bottom: 1rem;
            animation: tipSlide 0.3s ease;
        }

        @keyframes tipSlide {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tip-title {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            font-size: 0.8125rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--accent-blue);
        }

        .tip-title svg { width: 1rem; height: 1rem; }
        .tip-text { font-size: 0.75rem; color: var(--text-secondary); line-height: 1.5; }

        /* å›¾ç‰‡ä¸Šä¼  */
        .upload-zone {
            border: 2px dashed var(--border-color);
            border-radius: var(--radius-lg);
            padding: 2rem 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.25s;
            position: relative;
            overflow: hidden;
        }

        .upload-zone:hover { border-color: var(--accent-blue); background: var(--accent-blue-light); }
        .upload-zone:active { transform: scale(0.98); }
        .upload-zone.loaded { padding: 0.75rem; border-style: solid; border-color: var(--accent-green); background: var(--accent-green-light); }
        .upload-zone img { max-width: 100%; max-height: 8rem; border-radius: var(--radius-md); }

        .upload-placeholder svg {
            width: 2.5rem;
            height: 2.5rem;
            color: var(--text-tertiary);
            margin-bottom: 0.5rem;
            transition: transform 0.3s;
        }

        .upload-zone:hover .upload-placeholder svg { transform: scale(1.1); }
        .upload-placeholder p { font-size: 0.875rem; color: var(--text-secondary); }

        .upload-mask {
            position: absolute;
            inset: 0;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .upload-zone.loaded .upload-mask { opacity: 1; }
        .upload-mask span { font-size: 0.875rem; color: var(--accent-blue); font-weight: 500; }

        /* æŒ‰é’®è¡Œ */
        .btn-row {
            display: flex;
            gap: 0.5rem;
            margin-top: 1.25rem;
        }

        .btn {
            flex: 1;
            padding: 1rem 0.75rem;
            border: none;
            border-radius: var(--radius-lg);
            font-family: var(--font-main);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.25s cubic-bezier(0.2, 0, 0, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(rgba(255,255,255,0.2), transparent);
            opacity: 0;
            transition: opacity 0.2s;
        }

        .btn:hover::after { opacity: 1; }
        .btn:active { transform: scale(0.97); }
        .btn svg { width: 1.25rem; height: 1.25rem; }

        .btn.primary {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            color: #fff;
            box-shadow: var(--shadow-2);
        }

        .btn.primary:hover { box-shadow: var(--shadow-3); }

        .btn.secondary {
            background: linear-gradient(135deg, var(--accent-orange), var(--accent-red));
            color: #fff;
            box-shadow: var(--shadow-2);
        }

        .btn.ghost {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }

        .btn.ghost:hover { background: var(--bg-secondary); border-color: var(--text-tertiary); }
        .btn.danger { background: var(--accent-red-light); color: var(--accent-red); border: 1px solid rgba(234, 67, 53, 0.3); }
        .btn.danger:hover { background: var(--accent-red); color: #fff; }
        .btn:disabled { opacity: 0.6; pointer-events: none; }

        .btn .spin {
            width: 1.25rem;
            height: 1.25rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 0.7s linear infinite;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        /* ç»“æœåŒº */
        .result-section {
            margin-top: 1.25rem;
            padding-top: 1.25rem;
            border-top: 1px solid var(--border-color);
        }

        .result-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.625rem;
        }

        .result-title { font-size: 0.9375rem; font-weight: 600; color: var(--text-primary); }

        .result-content {
            min-height: 4.5rem;
            max-height: 10rem;
            overflow-y: auto;
            padding: 1rem;
            background: var(--bg-tertiary);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            font-family: var(--font-mono);
            font-size: 0.8125rem;
            line-height: 1.6;
            white-space: pre-wrap;
            word-break: break-all;
            cursor: pointer;
            transition: all 0.25s;
        }

        .result-content:hover { border-color: var(--accent-blue); background: var(--bg-secondary); }
        .result-content .empty { color: var(--text-tertiary); font-style: italic; }

        /* å¤åˆ¶æŒ‰é’® */
        .copy-btn-wrap {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .copy-btn {
            flex: 1;
            padding: 0.875rem 1rem;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            background: var(--bg-secondary);
            color: var(--text-secondary);
            font-family: var(--font-main);
            font-size: 0.9375rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.25s cubic-bezier(0.2, 0, 0, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .copy-btn:hover { border-color: var(--accent-blue); color: var(--accent-blue); background: var(--accent-blue-light); }
        .copy-btn:active { transform: scale(0.97); }
        .copy-btn svg { width: 1.25rem; height: 1.25rem; transition: transform 0.3s; }
        .copy-btn:hover svg { transform: scale(1.1); }

        .copy-btn.done {
            border-color: var(--accent-green);
            color: var(--accent-green);
            background: var(--accent-green-light);
            animation: copySuccess 0.4s ease;
        }

        @keyframes copySuccess {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .copy-btn.done svg { animation: checkmark 0.4s ease; }

        @keyframes checkmark {
            0% { transform: scale(0) rotate(-45deg); }
            50% { transform: scale(1.2) rotate(0deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        /* ç®—æ³•æ£€æµ‹ */
        .algo-info {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.5rem 0.75rem;
            background: var(--accent-green-light);
            border: 1px solid rgba(52, 168, 83, 0.2);
            border-radius: var(--radius-md);
            margin-top: 0.625rem;
            font-size: 0.8125rem;
            color: var(--accent-green);
            animation: algoSlide 0.3s ease;
        }

        @keyframes algoSlide {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .algo-info svg { width: 1rem; height: 1rem; }

        /* å›¾ç‰‡é¢„è§ˆ */
        .img-result {
            margin-top: 0.75rem;
            padding: 0.75rem;
            background: var(--bg-tertiary);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            animation: imgSlide 0.35s ease;
        }

        @keyframes imgSlide {
            from { opacity: 0; transform: translateY(15px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .img-result-head {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .img-result-head svg { width: 1.125rem; height: 1.125rem; color: var(--accent-green); }

        .img-result img {
            max-width: 100%;
            max-height: 12rem;
            display: block;
            margin: 0 auto;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-1);
        }

        .img-result .dl-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 0.75rem;
            padding: 0.75rem 1rem;
            background: var(--accent-green);
            color: #fff;
            border-radius: var(--radius-md);
            text-decoration: none;
            font-size: 0.9375rem;
            font-weight: 600;
            transition: all 0.2s;
            box-shadow: var(--shadow-1);
        }

        .img-result .dl-btn:hover { background: #2d9248; box-shadow: var(--shadow-2); }
        .img-result .dl-btn:active { transform: scale(0.97); }
        .img-result .dl-btn svg { width: 1.125rem; height: 1.125rem; }

        /* å¯¼èˆªæŒ‰é’® */
        .nav-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            width: 100%;
            padding: 1rem;
            margin-top: 1rem;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-xl);
            color: var(--accent-blue);
            font-family: var(--font-main);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.25s cubic-bezier(0.2, 0, 0, 1);
            box-shadow: var(--shadow-1);
        }

        .nav-btn:hover { border-color: var(--accent-blue); background: var(--accent-blue-light); box-shadow: var(--shadow-2); }
        .nav-btn:active { transform: scale(0.98); }
        .nav-btn svg { width: 1.25rem; height: 1.25rem; transition: transform 0.3s; }
        .nav-btn:hover svg { transform: translateX(4px); }
        .nav-btn.orange { color: #b06000; }
        .nav-btn.orange:hover { border-color: var(--accent-orange); background: var(--accent-orange-light); }

        /* ç‰¹æ€§ */
        .features {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.625rem;
            margin-top: 1.25rem;
        }

        .feature {
            padding: 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            text-align: center;
            transition: all 0.25s;
            box-shadow: var(--shadow-1);
        }

        .feature:hover { transform: translateY(-2px); box-shadow: var(--shadow-2); border-color: var(--accent-blue); }
        .feature:active { transform: scale(0.98); }
        .feature .icon { font-size: 1.5rem; margin-bottom: 0.25rem; }
        .feature .name { font-size: 0.875rem; font-weight: 600; margin-bottom: 0.1rem; }
        .feature .desc { font-size: 0.75rem; color: var(--text-tertiary); }

        /* é¡µè„š */
        .footer {
            text-align: center;
            padding: 1.25rem 0;
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }

        .hidden { display: none !important; }

        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 2px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--text-tertiary); }
    </style>
</head>
<body>
    <div class="page-bg"></div>

    <!-- Toast -->
    <div class="toast-wrap">
        <div id="toast" class="toast">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <path id="toast-icon" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span id="toast-text"></span>
        </div>
    </div>

    <!-- ç¡®è®¤å¼¹çª— -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal-box">
            <div class="modal-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                </svg>
            </div>
            <div class="modal-title" id="modal-title">ç¡®è®¤æ¸…ç©º</div>
            <div class="modal-text" id="modal-text">ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†…å®¹å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚</div>
            <div class="modal-btns">
                <button class="modal-btn cancel" id="modal-cancel">å–æ¶ˆ</button>
                <button class="modal-btn confirm" id="modal-confirm">ç¡®è®¤æ¸…ç©º</button>
            </div>
        </div>
    </div>

    <!-- åŠ å¯†é¡µé¢ -->
    <div id="page-encrypt" class="page active">
        <header class="header">
            <div class="header-logo">
                <div class="logo-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                    </svg>
                </div>
                <h1 class="logo-text">AES Pro</h1>
            </div>
            <p class="header-sub">å†›äº‹çº§åŠ å¯† Â· æœ¬åœ°å¤„ç† Â· å®‰å…¨å¯é </p>
            <div class="header-tags">
                <span class="header-tag">AES-256-GCM</span>
                <span class="header-tag">PBKDF2</span>
                <span class="header-tag">100Kè¿­ä»£</span>
            </div>
        </header>

        <div class="card">
            <div class="card-head">
                <div class="card-icon encrypt">ğŸ”</div>
                <span class="card-title">åŠ å¯†ä¸­å¿ƒ</span>
                <span class="card-badge blue">æœ¬åœ°åŠ å¯†</span>
            </div>

            <div class="mode-tabs">
                <button class="mode-tab active" data-mode="text">
                    <span class="icon">ğŸ“</span>
                    <span>æ–‡æœ¬</span>
                </button>
                <button class="mode-tab" data-mode="dual">
                    <span class="icon">ğŸ‘ï¸</span>
                    <span>åŒç³</span>
                </button>
                <button class="mode-tab" data-mode="image">
                    <span class="icon">ğŸ–¼ï¸</span>
                    <span>å›¾ç‰‡</span>
                </button>
            </div>

            <div class="form-body">
                <div id="mode-text">
                    <div class="form-group">
                        <div class="form-label">
                            <span>æ˜æ–‡å†…å®¹</span>
                            <span class="meta" id="char-count">0 å­—ç¬¦</span>
                        </div>
                        <div class="input-box">
                            <textarea id="plaintext" placeholder="è¯·è¾“å…¥è¦åŠ å¯†çš„æ–‡æœ¬..."></textarea>
                        </div>
                    </div>
                </div>

                <div id="mode-dual" class="hidden">
                    <div class="tip-box">
                        <div class="tip-title">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            åŒç³åŠ å¯†è¯´æ˜
                        </div>
                        <div class="tip-text">å¯†ç Aç‹¬ç«‹åŠ å¯†æ˜æ–‡Aï¼Œå¯†ç Bç‹¬ç«‹åŠ å¯†æ˜æ–‡B<br>è§£å¯†æ—¶å„å¯†ç åªèƒ½è§£å¯†å¯¹åº”å†…å®¹ï¼Œäº’ä¸å½±å“</div>
                    </div>
                    <div class="form-group">
                        <div class="form-label">
                            <span>æ˜æ–‡ A</span>
                            <span class="tag blue">å¯†ç AåŠ å¯†</span>
                        </div>
                        <div class="input-box">
                            <textarea id="plaintext-a" placeholder="ç¬¬ä¸€æ®µæ˜æ–‡..."></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="form-label">
                            <span>æ˜æ–‡ B</span>
                            <span class="tag purple">å¯†ç BåŠ å¯†</span>
                        </div>
                        <div class="input-box">
                            <textarea id="plaintext-b" placeholder="ç¬¬äºŒæ®µæ˜æ–‡..."></textarea>
                        </div>
                    </div>
                </div>

                <div id="mode-image" class="hidden">
                    <div class="form-group">
                        <div class="form-label">
                            <span>é€‰æ‹©å›¾ç‰‡</span>
                            <span class="meta">JPG/PNG/GIF</span>
                        </div>
                        <div class="upload-zone" id="upload-zone">
                            <div class="upload-placeholder">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                </svg>
                                <p>ç‚¹å‡»é€‰æ‹©å›¾ç‰‡</p>
                            </div>
                            <div class="upload-mask"><span>ç‚¹å‡»æ›´æ¢</span></div>
                        </div>
                        <input type="file" id="image-input" accept="image/*" hidden>
                    </div>
                </div>

                <div id="pwd-area">
                    <div class="form-group" id="pwd-a-group">
                        <div class="form-label">
                            <span id="pwd-a-name">å¯†ç </span>
                            <span class="tag red" id="pwd-a-tag">å¿…å¡«</span>
                        </div>
                        <div class="input-box">
                            <input type="password" id="password-a" placeholder="è¯·è¾“å…¥å¯†ç ">
                            <div class="input-btns">
                                <button type="button" class="input-btn" id="toggle-pwd-a">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                    </svg>
                                </button>
                                <button type="button" class="input-btn" id="gen-pwd-a">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="pwd-meter" id="pwd-meter">
                            <div class="meter-bar">
                                <div class="meter-seg"></div>
                                <div class="meter-seg"></div>
                                <div class="meter-seg"></div>
                                <div class="meter-seg"></div>
                                <div class="meter-seg"></div>
                            </div>
                            <div class="meter-info">
                                <span class="meter-level" id="meter-level"></span>
                                <span class="meter-hint" id="meter-hint"></span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group hidden" id="pwd-b-group">
                        <div class="form-label">
                            <span>å¯†ç  B</span>
                            <span class="tag purple">åŠ å¯†æ˜æ–‡B</span>
                        </div>
                        <div class="input-box">
                            <input type="password" id="password-b" placeholder="è¯·è¾“å…¥å¯†ç B">
                            <div class="input-btns">
                                <button type="button" class="input-btn" id="toggle-pwd-b">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="btn-row">
                    <button class="btn primary" id="btn-encrypt">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                        </svg>
                        <span>åŠ å¯†</span>
                    </button>
                    <button class="btn danger" id="btn-clear">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                        </svg>
                        <span>æ¸…ç©º</span>
                    </button>
                </div>

                <div class="result-section">
                    <div class="result-header">
                        <span class="result-title">åŠ å¯†ç»“æœ</span>
                    </div>
                    <div class="result-content" id="encrypt-result">
                        <span class="empty">åŠ å¯†ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</span>
                    </div>
                    <div class="copy-btn-wrap">
                        <button class="copy-btn" id="btn-copy">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                            </svg>
                            <span>å¤åˆ¶ç»“æœ</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <button class="nav-btn orange" id="go-decrypt">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"/>
            </svg>
            å‰å¾€è§£å¯†ä¸­å¿ƒ
        </button>

        <div class="features">
            <div class="feature"><div class="icon">ğŸ”</div><div class="name">å†›äº‹çº§åŠ å¯†</div><div class="desc">AES-256-GCM</div></div>
            <div class="feature"><div class="icon">ğŸ”‘</div><div class="name">å¼ºå¯†é’¥æ´¾ç”Ÿ</div><div class="desc">PBKDF2 10ä¸‡æ¬¡</div></div>
            <div class="feature"><div class="icon">ğŸ²</div><div class="name">éšæœºç›å€¼</div><div class="desc">æ¯æ¬¡å”¯ä¸€</div></div>
            <div class="feature"><div class="icon">ğŸ’»</div><div class="name">æœ¬åœ°å¤„ç†</div><div class="desc">æ•°æ®ä¸ä¸Šä¼ </div></div>
        </div>

        <footer class="footer">AES Pro Â· æœ¬åœ°å®‰å…¨åŠ å¯† Â· æ‚¨çš„æ•°æ®æ‚¨åšä¸»</footer>
    </div>

    <!-- è§£å¯†é¡µé¢ -->
    <div id="page-decrypt" class="page">
        <header class="header">
            <div class="header-logo">
                <div class="logo-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"/>
                    </svg>
                </div>
                <h1 class="logo-text">è§£å¯†ä¸­å¿ƒ</h1>
            </div>
            <p class="header-sub">å®‰å…¨è§£å¯† Â· è‡ªåŠ¨è¯†åˆ« Â· æ”¯æŒåŒç³å›¾ç‰‡</p>
            <div class="header-tags">
                <span class="header-tag">è‡ªåŠ¨è¯†åˆ«</span>
                <span class="header-tag">åŒç³è§£å¯†</span>
                <span class="header-tag">å›¾ç‰‡è§£å¯†</span>
            </div>
        </header>

        <div class="card">
            <div class="card-head">
                <div class="card-icon decrypt">ğŸ”“</div>
                <span class="card-title">è§£å¯†æ“ä½œ</span>
                <span class="card-badge orange">å®‰å…¨è§£å¯†</span>
            </div>

            <div class="form-body">
                <div class="form-group">
                    <div class="form-label">
                        <span>å¯†æ–‡å†…å®¹</span>
                        <span class="meta">ç‚¹å‡»ç²˜è´´æˆ–è¾“å…¥å¯†æ–‡</span>
                    </div>
                    <div class="input-box">
                        <textarea id="ciphertext" placeholder="è¯·ç²˜è´´è¦è§£å¯†çš„å¯†æ–‡..."></textarea>
                    </div>
                </div>

                <div class="algo-info hidden" id="algo-info">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <span id="algo-text">æ£€æµ‹åˆ°: AES-256-GCM</span>
                </div>

                <div class="tip-box hidden" id="decrypt-tip">
                    <div class="tip-title">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <span id="decrypt-tip-title">åŒç³å¯†æ–‡</span>
                    </div>
                    <div class="tip-text" id="decrypt-tip-text">å¯†ç Aåªèƒ½è§£å¯†å†…å®¹Aï¼Œå¯†ç Båªèƒ½è§£å¯†å†…å®¹B</div>
                </div>

                <div class="form-group">
                    <div class="form-label">
                        <span id="decrypt-pwd-name">è§£å¯†å¯†ç </span>
                        <span class="tag red">å¿…å¡«</span>
                    </div>
                    <div class="input-box">
                        <input type="password" id="decrypt-pwd-a" placeholder="è¯·è¾“å…¥è§£å¯†å¯†ç ">
                        <div class="input-btns">
                            <button type="button" class="input-btn" id="toggle-decrypt-pwd-a">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="form-group hidden" id="decrypt-pwd-b-group">
                    <div class="form-label">
                        <span>å¯†ç  B</span>
                        <span class="tag purple">è§£å¯†å†…å®¹B</span>
                    </div>
                    <div class="input-box">
                        <input type="password" id="decrypt-pwd-b" placeholder="è¾“å…¥å¯†ç Bè§£å¯†å†…å®¹B">
                        <div class="input-btns">
                            <button type="button" class="input-btn" id="toggle-decrypt-pwd-b">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="btn-row">
                    <button class="btn secondary" id="btn-decrypt">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"/>
                        </svg>
                        <span>è§£å¯†</span>
                    </button>
                    <button class="btn danger" id="btn-clear-decrypt">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                        </svg>
                        <span>æ¸…ç©º</span>
                    </button>
                </div>

                <div class="result-section">
                    <div class="result-header">
                        <span class="result-title">è§£å¯†ç»“æœ</span>
                    </div>
                    <div class="result-content" id="decrypt-result">
                        <span class="empty">è§£å¯†ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</span>
                    </div>
                    <div class="copy-btn-wrap">
                        <button class="copy-btn" id="btn-copy-decrypt">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                            </svg>
                            <span>å¤åˆ¶ç»“æœ</span>
                        </button>
                    </div>

                    <div class="img-result hidden" id="img-result">
                        <div class="img-result-head">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                            è§£å¯†å›¾ç‰‡é¢„è§ˆ
                        </div>
                        <img id="decrypt-img" src="" alt="è§£å¯†å›¾ç‰‡">
                        <a id="dl-img" download="decrypted.jpg" class="dl-btn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                            </svg>
                            ä¸‹è½½å›¾ç‰‡
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <button class="nav-btn" id="go-encrypt">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
            </svg>
            è¿”å›åŠ å¯†ä¸»é¡µ
        </button>

        <footer class="footer">AES Pro Â· æœ¬åœ°å®‰å…¨åŠ å¯† Â· æ‚¨çš„æ•°æ®æ‚¨åšä¸»</footer>
    </div>

    <script>
        // çŠ¶æ€
        let currentMode = 'text';
        let imageFile = null;
        let modalCallback = null;

        // DOM
        const $ = id => document.getElementById(id);
        const toast = $('toast');
        const toastIcon = $('toast-icon');
        const toastText = $('toast-text');
        const modalOverlay = $('modal-overlay');
        const modalTitle = $('modal-title');
        const modalText = $('modal-text');

        // Toast
        function showToast(text, type = 'info') {
            const icons = {
                success: 'M5 13l4 4L19 7',
                error: 'M6 18L18 6M6 6l12 12',
                info: 'M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z'
            };
            toast.className = 'toast ' + type;
            toastIcon.setAttribute('d', icons[type]);
            toastText.textContent = text;
            toast.classList.remove('show');
            void toast.offsetWidth;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // å¼¹çª—
        function showModal(title, text, callback) {
            modalTitle.textContent = title;
            modalText.textContent = text;
            modalCallback = callback;
            modalOverlay.classList.add('show');
        }

        function hideModal() {
            modalOverlay.classList.remove('show');
            modalCallback = null;
        }

        $('modal-cancel').addEventListener('click', hideModal);
        $('modal-confirm').addEventListener('click', () => {
            if (modalCallback) modalCallback();
            hideModal();
        });
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) hideModal();
        });

        // é¡µé¢åˆ‡æ¢
        $('go-decrypt').addEventListener('click', () => {
            $('page-encrypt').style.animation = 'pageSlideOut 0.3s ease forwards';
            setTimeout(() => {
                $('page-encrypt').classList.remove('active');
                $('page-encrypt').style.animation = '';
                $('page-decrypt').classList.add('active');
            }, 250);
        });

        $('go-encrypt').addEventListener('click', () => {
            $('page-decrypt').style.animation = 'pageSlideOut 0.3s ease forwards';
            setTimeout(() => {
                $('page-decrypt').classList.remove('active');
                $('page-decrypt').style.animation = '';
                $('page-encrypt').classList.add('active');
            }, 250);
        });

        const style = document.createElement('style');
        style.textContent = `@keyframes pageSlideOut { from { opacity: 1; transform: translateX(0); } to { opacity: 0; transform: translateX(-30px); } }`;
        document.head.appendChild(style);

        // æ¨¡å¼åˆ‡æ¢
        document.querySelectorAll('.mode-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.mode-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                currentMode = tab.dataset.mode;

                $('mode-text').classList.toggle('hidden', currentMode !== 'text');
                $('mode-dual').classList.toggle('hidden', currentMode !== 'dual');
                $('mode-image').classList.toggle('hidden', currentMode !== 'image');
                $('pwd-b-group').classList.toggle('hidden', currentMode !== 'dual');

                const pwdAName = $('pwd-a-name');
                const pwdATag = $('pwd-a-tag');
                if (currentMode === 'dual') {
                    pwdAName.textContent = 'å¯†ç  A';
                    pwdATag.textContent = 'åŠ å¯†æ˜æ–‡A';
                    pwdATag.className = 'tag blue';
                } else {
                    pwdAName.textContent = 'å¯†ç ';
                    pwdATag.textContent = 'å¿…å¡«';
                    pwdATag.className = 'tag red';
                }
            });
        });

        // å¯†ç å¼ºåº¦
        function checkStrength(pwd) {
            if (!pwd) return { score: 0, label: '', hint: '' };
            let score = 0;
            if (pwd.length >= 8) score++;
            if (pwd.length >= 12) score++;
            if (pwd.length >= 16) score++;
            if (/[a-z]/.test(pwd)) score++;
            if (/[A-Z]/.test(pwd)) score++;
            if (/[0-9]/.test(pwd)) score++;
            if (/[^a-zA-Z0-9]/.test(pwd)) score++;
            if (/(.)\1{2,}/.test(pwd)) score--;
            score = Math.max(0, Math.min(5, score));

            const levels = [
                { label: 'æå¼±', hint: 'å¤ªçŸ­', cls: 'weak' },
                { label: 'å¼±', hint: 'å»ºè®®åŠ é•¿', cls: 'weak' },
                { label: 'ä¸€èˆ¬', hint: 'å¯ä»¥æ›´å¼º', cls: 'medium' },
                { label: 'å¼º', hint: 'ä¸é”™', cls: 'medium' },
                { label: 'å¾ˆå¼º', hint: 'å¾ˆå¥½', cls: 'strong' },
                { label: 'æå¼º', hint: 'å®Œç¾', cls: 'strong' }
            ];
            return { score, ...levels[score] };
        }

        function updateStrength() {
            const pwd = $('password-a').value;
            const s = checkStrength(pwd);
            const segs = $('pwd-meter').querySelectorAll('.meter-seg');
            const colors = ['#ea4335', '#fbbc04', '#fbbc04', '#34a853', '#34a853', '#1a73e8'];

            segs.forEach((seg, i) => {
                seg.classList.toggle('on', i < s.score);
                seg.style.setProperty('--seg-color', colors[s.score]);
            });

            $('meter-level').textContent = s.label ? 'å¼ºåº¦: ' + s.label : '';
            $('meter-level').className = 'meter-level ' + (s.cls || '');
            $('meter-hint').textContent = s.hint || '';
        }

        $('password-a').addEventListener('input', updateStrength);

        // æ˜¾ç¤ºå¯†ç 
        $('toggle-pwd-a').addEventListener('click', () => {
            const el = $('password-a');
            el.type = el.type === 'password' ? 'text' : 'password';
        });
        $('toggle-pwd-b').addEventListener('click', () => {
            const el = $('password-b');
            el.type = el.type === 'password' ? 'text' : 'password';
        });
        $('toggle-decrypt-pwd-a').addEventListener('click', () => {
            const el = $('decrypt-pwd-a');
            el.type = el.type === 'password' ? 'text' : 'password';
        });
        $('toggle-decrypt-pwd-b').addEventListener('click', () => {
            const el = $('decrypt-pwd-b');
            el.type = el.type === 'password' ? 'text' : 'password';
        });

        // ç”Ÿæˆå¯†ç 
        $('gen-pwd-a').addEventListener('click', () => {
            const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*';
            let pwd = '';
            for (let i = 0; i < 20; i++) pwd += chars[Math.floor(Math.random() * chars.length)];
            $('password-a').value = pwd;
            updateStrength();
            showToast('å·²ç”Ÿæˆå¼ºå¯†ç ', 'success');
        });

        // å­—ç¬¦è®¡æ•°
        $('plaintext').addEventListener('input', () => {
            $('char-count').textContent = $('plaintext').value.length + ' å­—ç¬¦';
        });

        // å›¾ç‰‡ä¸Šä¼ 
        const uploadZone = $('upload-zone');
        const imageInput = $('image-input');

        uploadZone.addEventListener('click', () => imageInput.click());
        imageInput.addEventListener('change', e => {
            const file = e.target.files[0];
            if (file) {
                imageFile = file;
                const reader = new FileReader();
                reader.onload = ev => {
                    uploadZone.classList.add('loaded');
                    uploadZone.innerHTML = `<img src="${ev.target.result}" alt="é¢„è§ˆ"><div class="upload-mask"><span>ç‚¹å‡»æ›´æ¢</span></div>`;
                };
                reader.readAsDataURL(file);
            }
        });

        // å¯†é’¥æ´¾ç”Ÿ
        async function deriveKey(password, salt, algo) {
            const enc = new TextEncoder();
            const keyMaterial = await crypto.subtle.importKey('raw', enc.encode(password), 'PBKDF2', false, ['deriveKey']);
            const algoName = algo === 'CTR' ? 'AES-CTR' : algo === 'CBC' ? 'AES-CBC' : 'AES-GCM';
            const len = algo === 'CTR' ? 128 : 256;
            return crypto.subtle.deriveKey(
                { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },
                keyMaterial,
                { name: algoName, length: len },
                false,
                ['encrypt', 'decrypt']
            );
        }

        // åŠ å¯†
        async function encrypt(data, password, algo = 'GCM') {
            const enc = new TextEncoder();
            const salt = crypto.getRandomValues(new Uint8Array(16));
            const ivLen = algo === 'GCM' ? 12 : 16;
            const iv = crypto.getRandomValues(new Uint8Array(ivLen));
            const key = await deriveKey(password, salt, algo);
            const algoName = algo === 'CTR' ? 'AES-CTR' : algo === 'CBC' ? 'AES-CBC' : 'AES-GCM';

            const params = algo === 'CTR' ? { name: 'AES-CTR', counter: iv, length: 64 } : { name: algoName, iv };

            const encrypted = await crypto.subtle.encrypt(params, key, enc.encode(data));
            const combined = new Uint8Array(salt.length + iv.length + encrypted.byteLength);
            combined.set(salt, 0);
            combined.set(iv, salt.length);
            combined.set(new Uint8Array(encrypted), salt.length + iv.length);

            return 'AES' + algo + btoa(String.fromCharCode(...combined));
        }

        // è§£å¯†
        async function decrypt(data, password) {
            let algo = 'GCM';
            if (data.startsWith('AESCTR')) { algo = 'CTR'; data = data.slice(6); }
            else if (data.startsWith('AESCBC')) { algo = 'CBC'; data = data.slice(6); }
            else if (data.startsWith('AESGCM')) { algo = 'GCM'; data = data.slice(6); }

            const combined = new Uint8Array(atob(data).split('').map(c => c.charCodeAt(0)));
            const salt = combined.slice(0, 16);
            const ivLen = algo === 'GCM' ? 12 : 16;
            const iv = combined.slice(16, 16 + ivLen);
            const encrypted = combined.slice(16 + ivLen);
            const key = await deriveKey(password, salt, algo);
            const algoName = algo === 'CTR' ? 'AES-CTR' : algo === 'CBC' ? 'AES-CBC' : 'AES-GCM';

            const params = algo === 'CTR' ? { name: 'AES-CTR', counter: iv, length: 64 } : { name: algoName, iv };

            const decrypted = await crypto.subtle.decrypt(params, key, encrypted);
            return { text: new TextDecoder().decode(decrypted), algo };
        }

        // æ£€æµ‹ç®—æ³•
        function detectAlgo(data) {
            if (data.startsWith('DUAL:')) return 'åŒç³åŠ å¯†';
            if (data.startsWith('IMG:')) return 'å›¾ç‰‡åŠ å¯†';
            if (data.startsWith('AESCTR')) return 'AES-128-CTR';
            if (data.startsWith('AESCBC')) return 'AES-256-CBC';
            if (data.startsWith('AESGCM')) return 'AES-256-GCM';
            return 'AES-256-GCM (é»˜è®¤)';
        }

        // åŠ å¯†æŒ‰é’®
        $('btn-encrypt').addEventListener('click', async () => {
            const pwdA = $('password-a').value;
            if (!pwdA) { showToast('è¯·è¾“å…¥å¯†ç ', 'error'); return; }

            const btn = $('btn-encrypt');
            btn.innerHTML = '<div class="spin"></div><span>åŠ å¯†ä¸­</span>';
            btn.disabled = true;

            try {
                let output = '';

                if (currentMode === 'text') {
                    const text = $('plaintext').value;
                    if (!text) throw new Error('è¯·è¾“å…¥æ˜æ–‡');
                    output = await encrypt(text, pwdA, 'GCM');
                } else if (currentMode === 'dual') {
                    const textA = $('plaintext-a').value;
                    const textB = $('plaintext-b').value;
                    const pwdB = $('password-b').value;

                    if (!textA && !textB) throw new Error('è¯·è‡³å°‘è¾“å…¥ä¸€æ®µæ˜æ–‡');

                    const encA = textA ? await encrypt(textA, pwdA, 'GCM') : '';
                    const encB = (textB && pwdB) ? await encrypt(textB, pwdB, 'CBC') : '';
                    output = 'DUAL:' + encA + ':' + encB;
                } else if (currentMode === 'image') {
                    if (!imageFile) throw new Error('è¯·é€‰æ‹©å›¾ç‰‡');

                    const reader = new FileReader();
                    reader.onload = async e => {
                        try {
                            const base64 = e.target.result.split(',')[1];
                            output = 'IMG:' + await encrypt(base64, pwdA, 'GCM');
                            $('encrypt-result').innerHTML = output;
                            showToast('å›¾ç‰‡åŠ å¯†æˆåŠŸ', 'success');
                        } catch (err) {
                            showToast('åŠ å¯†å¤±è´¥: ' + err.message, 'error');
                        }
                        btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg><span>åŠ å¯†</span>';
                        btn.disabled = false;
                    };
                    reader.readAsDataURL(imageFile);
                    return;
                }

                $('encrypt-result').innerHTML = output;
                showToast('åŠ å¯†æˆåŠŸ', 'success');
            } catch (err) {
                showToast('åŠ å¯†å¤±è´¥: ' + err.message, 'error');
            }

            btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg><span>åŠ å¯†</span>';
            btn.disabled = false;
        });

        // è§£å¯†æŒ‰é’®
        $('btn-decrypt').addEventListener('click', async () => {
            const input = $('ciphertext').value.trim();
            if (!input) { showToast('è¯·è¾“å…¥å¯†æ–‡', 'error'); return; }

            const pwdA = $('decrypt-pwd-a').value;
            if (!pwdA) { showToast('è¯·è¾“å…¥å¯†ç ', 'error'); return; }

            const btn = $('btn-decrypt');
            btn.innerHTML = '<div class="spin"></div><span>è§£å¯†ä¸­</span>';
            btn.disabled = true;
            $('img-result').classList.add('hidden');

            try {
                const detected = detectAlgo(input);
                $('algo-text').textContent = 'æ£€æµ‹åˆ°: ' + detected;
                $('algo-info').classList.remove('hidden');

                if (input.startsWith('IMG:')) {
                    $('decrypt-tip').classList.remove('hidden');
                    $('decrypt-tip-title').textContent = 'å›¾ç‰‡å¯†æ–‡';
                    $('decrypt-tip-text').textContent = 'æ­£åœ¨è§£å¯†å›¾ç‰‡ï¼Œè¯·ç¨å€™...';
                    $('decrypt-pwd-b-group').classList.add('hidden');

                    const encData = input.slice(4);
                    const { text: base64 } = await decrypt(encData, pwdA);
                    $('decrypt-img').src = 'data:image/jpeg;base64,' + base64;
                    $('dl-img').href = $('decrypt-img').src;
                    $('img-result').classList.remove('hidden');
                    $('decrypt-result').innerHTML = '<span class="empty">[å›¾ç‰‡å·²è§£å¯†] æŸ¥çœ‹ä¸‹æ–¹é¢„è§ˆ</span>';
                    $('decrypt-tip-text').textContent = 'å›¾ç‰‡è§£å¯†æˆåŠŸï¼Œå¯ä¸‹è½½ä¿å­˜';
                    showToast('å›¾ç‰‡è§£å¯†æˆåŠŸ', 'success');

                } else if (input.startsWith('DUAL:')) {
                    $('decrypt-tip').classList.remove('hidden');
                    $('decrypt-tip-title').textContent = 'åŒç³å¯†æ–‡';
                    $('decrypt-tip-text').textContent = 'å¯†ç Aåªèƒ½è§£å¯†å†…å®¹Aï¼Œå¯†ç Båªèƒ½è§£å¯†å†…å®¹B';
                    $('decrypt-pwd-b-group').classList.remove('hidden');

                    const parts = input.slice(5).split(':');
                    let result = '';

                    if (parts[0]) {
                        try {
                            const { text: textA } = await decrypt(parts[0], pwdA);
                            result += 'â”â”â”â”â” å†…å®¹ A â”â”â”â”â”\n' + textA + '\n\n';
                        } catch {
                            result += 'â”â”â”â”â” å†…å®¹ A â”â”â”â”â”\n[å¯†ç Aé”™è¯¯ï¼Œæ— æ³•è§£å¯†]\n\n';
                        }
                    }

                    const pwdB = $('decrypt-pwd-b').value;
                    if (parts[1]) {
                        if (pwdB) {
                            try {
                                const { text: textB } = await decrypt(parts[1], pwdB);
                                result += 'â”â”â”â”â” å†…å®¹ B â”â”â”â”â”\n' + textB;
                            } catch {
                                result += 'â”â”â”â”â” å†…å®¹ B â”â”â”â”â”\n[å¯†ç Bé”™è¯¯ï¼Œæ— æ³•è§£å¯†]';
                            }
                        } else {
                            result += 'â”â”â”â”â” å†…å®¹ B â”â”â”â”â”\n[è¯·è¾“å…¥å¯†ç Bè§£å¯†æ­¤å†…å®¹]';
                        }
                    }

                    $('decrypt-result').innerHTML = result;
                    showToast('åŒç³è§£å¯†å®Œæˆ', 'success');

                } else {
                    $('decrypt-tip').classList.add('hidden');
                    $('decrypt-pwd-b-group').classList.add('hidden');

                    const { text, algo } = await decrypt(input, pwdA);
                    $('decrypt-result').innerHTML = text;
                    $('algo-text').textContent = 'æ£€æµ‹åˆ°: AES-256-' + algo;
                    showToast('è§£å¯†æˆåŠŸ', 'success');
                }
            } catch (err) {
                showToast('è§£å¯†å¤±è´¥: å¯†ç é”™è¯¯æˆ–æ•°æ®æŸå', 'error');
                $('algo-info').classList.add('hidden');
                $('decrypt-tip').classList.add('hidden');
            }

            btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"/></svg><span>è§£å¯†</span>';
            btn.disabled = false;
        });

        // æ¸…ç©ºåŠ å¯†é¡µ - å¢å¼ºç‰ˆ
        function clearEncryptPage() {
            $('plaintext').value = '';
            $('plaintext-a').value = '';
            $('plaintext-b').value = '';
            $('password-a').value = '';
            $('password-b').value = '';
            $('char-count').textContent = '0 å­—ç¬¦';
            $('encrypt-result').innerHTML = '<span class="empty">åŠ å¯†ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</span>';
            imageFile = null;
            uploadZone.classList.remove('loaded');
            uploadZone.innerHTML = `
                <div class="upload-placeholder">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                    </svg>
                    <p>ç‚¹å‡»é€‰æ‹©å›¾ç‰‡</p>
                </div>
                <div class="upload-mask"><span>ç‚¹å‡»æ›´æ¢</span></div>
            `;
            imageInput.value = '';
            updateStrength();
            
            // é‡ç½®æ¨¡å¼åˆ°æ–‡æœ¬
            document.querySelectorAll('.mode-tab').forEach(t => t.classList.remove('active'));
            document.querySelector('.mode-tab[data-mode="text"]').classList.add('active');
            currentMode = 'text';
            $('mode-text').classList.remove('hidden');
            $('mode-dual').classList.add('hidden');
            $('mode-image').classList.add('hidden');
            $('pwd-b-group').classList.add('hidden');
            $('pwd-a-name').textContent = 'å¯†ç ';
            $('pwd-a-tag').textContent = 'å¿…å¡«';
            $('pwd-a-tag').className = 'tag red';
            
            showToast('å·²æ¸…ç©ºæ‰€æœ‰å†…å®¹', 'success');
        }

        // æ¸…ç©ºè§£å¯†é¡µ - å¢å¼ºç‰ˆ
        function clearDecryptPage() {
            $('ciphertext').value = '';
            $('decrypt-pwd-a').value = '';
            $('decrypt-pwd-b').value = '';
            $('decrypt-result').innerHTML = '<span class="empty">è§£å¯†ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</span>';
            $('algo-info').classList.add('hidden');
            $('decrypt-tip').classList.add('hidden');
            $('decrypt-pwd-b-group').classList.add('hidden');
            $('img-result').classList.add('hidden');
            $('decrypt-img').src = '';
            showToast('å·²æ¸…ç©ºæ‰€æœ‰å†…å®¹', 'success');
        }

        // æ¸…ç©ºå…¨éƒ¨ - è¶…çº§æ¸…ç©º
        function clearAll() {
            clearEncryptPage();
            clearDecryptPage();
            
            // æ¸…é™¤å¯èƒ½çš„æœ¬åœ°å­˜å‚¨
            try {
                localStorage.clear();
                sessionStorage.clear();
            } catch (e) {}
            
            // é‡Šæ”¾å›¾ç‰‡å†…å­˜
            if (imageFile) {
                imageFile = null;
            }
            
            showToast('å·²æ¸…ç©ºæ‰€æœ‰ç¼“å­˜å’Œæ•°æ®', 'success');
        }

        // æ¸…ç©ºæŒ‰é’®äº‹ä»¶
        $('btn-clear').addEventListener('click', () => {
            showModal('ç¡®è®¤æ¸…ç©º', 'ç¡®å®šè¦æ¸…ç©ºåŠ å¯†é¡µé¢çš„æ‰€æœ‰å†…å®¹å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚', clearEncryptPage);
        });

        $('btn-clear-decrypt').addEventListener('click', () => {
            showModal('ç¡®è®¤æ¸…ç©º', 'ç¡®å®šè¦æ¸…ç©ºè§£å¯†é¡µé¢çš„æ‰€æœ‰å†…å®¹å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚', clearDecryptPage);
        });

        // å¤åˆ¶æŒ‰é’®
        function setupCopyBtn(btnId, resultId) {
            const btn = $(btnId);
            const result = $(resultId);

            btn.addEventListener('click', async () => {
                const text = result.textContent;
                if (!text || text.includes('å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ') || text.includes('[å›¾ç‰‡å·²è§£å¯†]') || text.includes('[è¯·è¾“å…¥å¯†ç ')) {
                    showToast('æ²¡æœ‰å¯å¤åˆ¶çš„å†…å®¹', 'error');
                    return;
                }
                try {
                    await navigator.clipboard.writeText(text);
                    btn.classList.add('done');
                    btn.innerHTML = `
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/>
                        </svg>
                        <span>å¤åˆ¶æˆåŠŸ</span>
                    `;
                    showToast('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');
                    setTimeout(() => {
                        btn.classList.remove('done');
                        btn.innerHTML = `
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                            </svg>
                            <span>å¤åˆ¶ç»“æœ</span>
                        `;
                    }, 2000);
                } catch {
                    showToast('å¤åˆ¶å¤±è´¥', 'error');
                }
            });
        }

        setupCopyBtn('btn-copy', 'encrypt-result');
        setupCopyBtn('btn-copy-decrypt', 'decrypt-result');

        // å¯†æ–‡è¾“å…¥æ£€æµ‹
        $('ciphertext').addEventListener('input', () => {
            const input = $('ciphertext').value.trim();
            if (input) {
                const detected = detectAlgo(input);
                $('algo-text').textContent = 'æ£€æµ‹åˆ°: ' + detected;
                $('algo-info').classList.remove('hidden');

                if (input.startsWith('DUAL:')) {
                    $('decrypt-tip').classList.remove('hidden');
                    $('decrypt-tip-title').textContent = 'åŒç³å¯†æ–‡';
                    $('decrypt-tip-text').textContent = 'å¯†ç Aåªèƒ½è§£å¯†å†…å®¹Aï¼Œå¯†ç Båªèƒ½è§£å¯†å†…å®¹B';
                    $('decrypt-pwd-b-group').classList.remove('hidden');
                } else if (input.startsWith('IMG:')) {
                    $('decrypt-tip').classList.remove('hidden');
                    $('decrypt-tip-title').textContent = 'å›¾ç‰‡å¯†æ–‡';
                    $('decrypt-tip-text').textContent = 'è¾“å…¥å¯†ç åç‚¹å‡»è§£å¯†æŸ¥çœ‹å›¾ç‰‡';
                    $('decrypt-pwd-b-group').classList.add('hidden');
                } else {
                    $('decrypt-tip').classList.add('hidden');
                    $('decrypt-pwd-b-group').classList.add('hidden');
                }
            } else {
                $('algo-info').classList.add('hidden');
                $('decrypt-tip').classList.add('hidden');
                $('decrypt-pwd-b-group').classList.add('hidden');
            }
        });
    </script>
</body>
</html>
